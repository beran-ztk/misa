<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignWidth="800" d:DesignHeight="450"
             x:Class="Misa.Ui.Avalonia.Features.Details.Information.Extensions.Sessions.SessionView"
             xmlns:information="clr-namespace:Misa.Ui.Avalonia.Features.Details.Information.Extensions.Sessions"
             x:DataType="information:SessionViewModel">

    <StackPanel Spacing="12">

        <Border Padding="12"
                Margin="10"
                CornerRadius="10"
                BorderThickness="1"
                BorderBrush="{StaticResource BrushBorder}"
                Background="{StaticResource BrushPrimaryBackgroundLighter}">

            <StackPanel Spacing="12">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <Button Command="{Binding ShowStartSessionFormCommand}">
                        <Image Width="16" Height="16"
                               Source="{SvgImage /Assets/Images/Details/play.svg}"/>
                    </Button>

                    <Button Command="{Binding ShowPauseSessionFormCommand}">
                        <Image Width="16" Height="16"
                               Source="{SvgImage /Assets/Images/Details/pause.svg}"/>
                    </Button>

                    <Button Command="{Binding ContinueSessionCommand}">
                        <Image Width="16" Height="16"
                               Source="{SvgImage /Assets/Images/Details/play-pause.svg}"/>
                    </Button>
                
                    <Button Command="{Binding ShowStopSessionFormCommand}">
                        <Image Width="16" Height="16"
                               Source="{SvgImage /Assets/Images/Details/stop.svg}"/>
                    </Button>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Start-Session Form -->
        <Border Padding="12"
                Margin="10,0,10,10"
                CornerRadius="10"
                BorderThickness="1"
                BorderBrush="{StaticResource BrushBorder}"
                Background="{StaticResource BrushPrimaryBackgroundLighter}"
                IsVisible="{Binding IsStartSessionFormOpen}">

            <StackPanel Spacing="10">
                <TextBlock Text="Start session"
                           FontWeight="SemiBold"/>

                <Grid ColumnDefinitions="140,*"
                      RowDefinitions="Auto,Auto,Auto,Auto,Auto"
                      RowSpacing="8"
                      ColumnSpacing="10">

                    <TextBlock Grid.Row="0" Grid.Column="0"
                               VerticalAlignment="Center"
                               Text="Planned (min)" />
                    <NumericUpDown Grid.Row="0" Grid.Column="1"
                                   Classes="misa-input"
                                   Minimum="1" Maximum="600"
                                   Value="{Binding PlannedMinutes, Mode=TwoWay}" />

                    <TextBlock Grid.Row="1" Grid.Column="0"
                               VerticalAlignment="Center"
                               Text="Objective" />
                    <TextBox Grid.Row="1" Grid.Column="1"
                             Classes="misa-input"
                             Text="{Binding Objective, Mode=TwoWay}"
                             Watermark="What are you doing?" />

                    <TextBlock Grid.Row="2" Grid.Column="0"
                               VerticalAlignment="Center"
                               Text="Auto stop" />
                    <CheckBox Grid.Row="2" Grid.Column="1"
                              IsChecked="{Binding StopAutomatically, Mode=TwoWay}"
                              Content="Stop automatically after planned duration" />

                    <TextBlock Grid.Row="3" Grid.Column="0"
                               VerticalAlignment="Center"
                               Text="Reason" />
                    <TextBox Grid.Row="3" Grid.Column="1"
                             Classes="misa-input"
                             IsEnabled="{Binding StopAutomatically}"
                             Text="{Binding AutoStopReason, Mode=TwoWay}"
                             Watermark="Optional reason" />

                    <TextBlock Grid.Row="4" Grid.Column="0" Text=" " />
                    <StackPanel Grid.Row="4" Grid.Column="1"
                                Orientation="Horizontal"
                                Spacing="8"
                                HorizontalAlignment="Right">
                        <Button Content="Cancel"
                                Command="{Binding CloseStartSessionFormCommand}" />
                        <Button Content="Save"
                                Command="{Binding StartSessionCommand}" />
                    </StackPanel>
                </Grid>
            </StackPanel>
        </Border>

        <Border Padding="12"
                Margin="10,0,10,10"
                CornerRadius="10"
                BorderThickness="1"
                BorderBrush="{StaticResource BrushBorder}"
                Background="{StaticResource BrushPrimaryBackgroundLighter}"
                IsVisible="{Binding IsPauseSessionFormOpen}">

            <StackPanel Spacing="10">
                <TextBlock Text="Pause session"
                           FontWeight="SemiBold"/>

                <Grid ColumnDefinitions="*"
                      RowDefinitions="Auto,Auto"
                      RowSpacing="8"
                      ColumnSpacing="10">

                    <TextBlock Grid.Row="0" VerticalAlignment="Top" Text="What is the reason to pause your session?" />
                    <StackPanel Grid.Row="1" Spacing="8">
                        <TextBox Classes="misa-input"
                                 Text="{Binding PauseReason, Mode=TwoWay}"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 MinHeight="80"/>

                        <StackPanel Orientation="Horizontal"
                                    Spacing="8"
                                    HorizontalAlignment="Right">
                            <Button Command="{Binding ClosePauseSessionFormCommand}" 
                                    Content="Cancel"/>
                            <Button Content="Save"
                                    Command="{Binding PauseSessionCommand}" />
                        </StackPanel>
                    </StackPanel>

                </Grid>

            </StackPanel>
        </Border>
        
        <Border Padding="12"
                Margin="10,0,10,10"
                CornerRadius="10"
                BorderThickness="1"
                BorderBrush="{StaticResource BrushBorder}"
                Background="{StaticResource BrushPrimaryBackgroundLighter}"
                IsVisible="{Binding IsStopSessionFormOpen}">
            <StackPanel Spacing="10">
                <TextBlock Text="Stop session"
                           FontWeight="SemiBold"/>

                <Grid ColumnDefinitions="140,*"
                      RowDefinitions="Auto,Auto,Auto"
                      RowSpacing="8"
                      ColumnSpacing="10">

                    <TextBlock Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Text="Efficiency" />
                    <ComboBox Grid.Row="0" Grid.Column="1"
                              Classes="misa-input"
                              ItemsSource="{Binding EfficiencyTypes}"
                              SelectedValue="{Binding EfficiencyId}"
                              SelectedValueBinding="{Binding Id}"
                              DisplayMemberBinding="{Binding Name}"/>

                    <TextBlock Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" Text="Concentration" />
                    <ComboBox Grid.Row="1" Grid.Column="1"
                              Classes="misa-input"
                              ItemsSource="{Binding ConcentrationTypes}"
                              SelectedValue="{Binding ConcentrationId}"
                              SelectedValueBinding="{Binding Id}"
                              DisplayMemberBinding="{Binding Name}" />

                    <TextBlock Grid.Row="2" Grid.Column="0" VerticalAlignment="Top" Text="Summary" />
                    <StackPanel Grid.Row="2" Grid.Column="1" Spacing="8">
                        <TextBox Classes="misa-input"
                                 Text="{Binding Summary, Mode=TwoWay}"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 MinHeight="80"
                                 Watermark="What happened? Short summary." />

                        <StackPanel Orientation="Horizontal"
                                    Spacing="8"
                                    HorizontalAlignment="Right">
                            <Button Content="Cancel"
                                    Command="{Binding CloseStopSessionFormCommand}"/>
                            <Button Content="Save"
                                    Command="{Binding StopSessionCommand}" />
                        </StackPanel>
                    </StackPanel>

                </Grid>

            </StackPanel>
        </Border>
            
    </StackPanel>
</UserControl>
